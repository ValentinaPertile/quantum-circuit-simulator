<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quantum Circuit Simulator</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-title">
                <h1>Quantum Circuit Simulator</h1>
                <div>
                    <div class="header-subtitle">Build and simulate quantum circuits</div>
                    <div class="header-subtitle" style="font-size: 0.85rem; opacity: 0.7;">Activity 5.4.3 Project</div>
                </div>
            </div>
            <div class="header-controls">
                <button class="theme-toggle" onclick="toggleTheme()">
                    <span id="themeIcon">üåô</span> Toggle Theme
                </button>
            </div>
        </header>

        <!-- Main Grid -->
        <div class="main-grid">
            <!-- Column 1: Configuration & Gates -->
            <div style="display: flex; flex-direction: column; gap: 1.5rem;">
                <!-- Configuration Card -->
                <div class="card">
                    <h2 class="card-title">
                        <span></span> Configuration
                    </h2>
                    <div class="config-row">
                        <label class="config-label">Number of Qubits:</label>
                        <input type="number" id="numQubits" class="config-input" min="1" max="3" value="2">
                    </div>
                </div>

                <!-- Gates Card -->
                <div class="card">
                    <h2 class="card-title">
                        <span></span> Quantum Gates
                    </h2>
                    <div class="gates-grid">
                        <button class="gate-btn h" onclick="addGate('H')">H</button>
                        <button class="gate-btn x" onclick="addGate('X')">X</button>
                        <button class="gate-btn y" onclick="addGate('Y')">Y</button>
                        <button class="gate-btn z" onclick="addGate('Z')">Z</button>
                        <button class="gate-btn cnot" onclick="addGate('CNOT')">CNOT</button>
                    </div>

                    <!-- Gate Configuration -->
                    <div id="gateConfig" class="gate-config hidden">
                        <div class="input-group">
                            <label class="input-label">Target Qubit</label>
                            <select id="targetQubit" class="input-select"></select>
                        </div>
                        <div id="controlQubitDiv" class="input-group hidden">
                            <label class="input-label">Control Qubit</label>
                            <select id="controlQubit" class="input-select"></select>
                        </div>
                        <button class="btn btn-primary btn-block" onclick="confirmGate()">
                             Add to Circuit
                        </button>
                    </div>
                </div>

                <!-- Presets Card -->
                <div class="card">
                    <h2 class="card-title">
                        <span></span> Quick Start
                    </h2>
                    <div class="presets-grid">
                        <button class="btn btn-secondary" onclick="loadBellState()">
                             Bell State
                        </button>
                        <button class="btn btn-secondary" onclick="loadExample()">
                             Activity 5.4.3
                        </button>
                    </div>
                </div>
            </div>

            <!-- Column 2: Circuit Visualization & Operations -->
            <div style="display: flex; flex-direction: column; gap: 1.5rem;">
                <!-- Circuit Visualization -->
                <div class="card">
                    <h2 class="card-title">
                        <span></span> Circuit Diagram
                    </h2>
                    <div class="circuit-display">
                        <div id="circuitCanvas"></div>
                    </div>
                </div>

                <!-- Operations List -->
                <div class="card">
                    <div class="operations-header">
                        <h2 class="card-title" style="margin-bottom: 0;">
                            <span></span> Operations
                        </h2>
                        <button class="btn btn-clear" onclick="clearCircuit()" style="padding: 0.4rem 0.8rem; font-size: 0.85rem;">
                            üóëÔ∏è Clear
                        </button>
                    </div>
                    <div id="operationsList" class="operations-list">
                        <div class="circuit-empty">No operations yet</div>
                    </div>
                    <button class="btn btn-primary btn-block" onclick="simulate()">
                         Run Simulation
                    </button>
                </div>
            </div>

            <!-- Column 3: Results -->
            <div style="display: flex; flex-direction: column; gap: 1.5rem;">
                <!-- Quantum State -->
                <div class="card">
                    <h2 class="card-title">
                        <span></span> Quantum State
                    </h2>
                    <div id="amplitudesDisplay">
                        <div class="circuit-empty">Run simulation to see results</div>
                    </div>
                </div>

                <!-- Entanglement Analysis -->
                <div class="card">
                    <h2 class="card-title">
                        <span></span> Entanglement
                    </h2>
                    <div id="entanglementDisplay">
                        <div class="text-center text-muted">
                            <p>Available for 2-qubit systems</p>
                        </div>
                    </div>
                </div>

                <!-- Info Card -->
                <div class="info-card">
                    <h3>About</h3>
                    <p>
                        Interactive quantum circuit simulator with real-time visualization. 
                        Supports up to 3 qubits with entanglement analysis and state visualization.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script src="circuit-visualizer.js"></script>
    <script src="app.js"></script>
</body>
</html>